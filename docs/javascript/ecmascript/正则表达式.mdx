# 正则表达式

## 1 什么是正则表达式

- 正则表达式（Regular Expression）是用于匹配字符串中字符组合的模式。在 JavaScript中,正则表达式也是对象

- 通常用来查找、替换那些符合正则表达式的文本,许多语言都支持正则表达式。

- 正则表达式在 JavaScript中的使用场景：

  - 例如验证表单：用户名表单只能输入英文字母、数字或者下划线, 昵称输入框中可以输入中文(匹配) 

    - 比如用户名: /^[a-z0-9_-]{3,16}$/

  - 过滤掉页面内容中的一些敏感词(替换)

  - 从字符串中获取我们想要的特定部分(提取)等 。

    

## 2 语法

（1）定义规则
（2）查找

- JavaScript 中定义正则表达式的语法有两种,我们先学习其中比较简单的方法：

  - 定义正则表达式语法：

    ```javascript
    let 变量名 = /表达式/
    ```

    - 其中 / / 是正则表达式字面量
    - 比如：

    ```javascript
    let reg = /前端/
    ```

  - 判断是否有符合规则的字符串：

    - test() 方法 用来查看正则表达式与指定的字符串是否匹配

      - 语法：

        ```javascript
        regObj.test(被检测的字符串)
        ```

      - 比如：

        ```javascript
        let str = '前端开发, web前端, 软件开发, 软件测试'
        let reg = /前端/
        let re = reg.test(str)
        console.log(re)  //true
        ```

        - 如果正则表达式与指定的字符串匹配 ,返回true,否则false

  - 检索（查找）符合规则的字符串：

    - exec() 方法 在一个指定字符串中执行一个搜索匹配

      - 语法：

        ```javascript
        regObj.exec(被检测的字符串)
        ```

      - 比如：

        ```javascript
        let str = '前端开发, web前端, 软件开发, 软件测试'
        let reg = /前端/
        let re = reg.exec(str)
        console.log(re)  //返回的是个数组
        ```

        - 如果匹配成功,exec() 方法返回一个数组,否则返回null

- 正则表达式检测查找 test方法和exec方法有什么区别？

  - test方法 用于判断是否有符合规则的字符串,返回的是布尔值 找到返回true,否则false
  - exec方法用于检索（查找）符合规则的字符串,找到返回数组,否则为null



## 3 元字符

- 普通字符:
  - 大多数的字符仅能够描述它们本身,这些字符称作普通字符,例如所有的字母和数字。
  - 也就是说普通字符只能够匹配字符串中与它们相同的字符。 
- 元字符(特殊字符）
  - 是一些具有特殊含义的字符,可以极大提高了灵活性和强大的匹配功能。
    - 比如,规定用户只能输入英文26个英文字母,普通字符的话 abcdefghijklm…..
    - 但是换成元字符写法： [a-z] 
- 参考文档：
  - MDN：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions
  - 正则测试工具: http://tool.oschina.net/regex

- 为了方便记忆和学习,我们对众多的元字符进行了分类：
  - 边界符（表示位置,开头和结尾,必须用什么开头,用什么结尾）
  - 量词 （表示重复次数）
  - 字符类 （比如 \d 表示 0~9）

（1）边界符

- 正则表达式中的边界符（位置符）用来提示字符所处的位置,主要有两个字符

  | 边界符 | 说明                           |
  | ------ | ------------------------------ |
  | ^      | 表示匹配行首的文本（以谁开始） |
  | $      | 表示匹配行尾的文本（以谁结束） |

  - 如果 ^ 和 \$ 在一起,表示必须是精确匹配。
    	例如：^哈$  匹配只能是 哈

（2）量词

- 量词用来 设定某个模式出现的次数

  | 量词    | 说明             |
  | ------- | ---------------- |
  | `*`     | 重复零次或更多次 |
  | `+`     | 重复一次或更多次 |
  | `?`     | 重复零次或一次   |
  | `{n}`   | 重复n次          |
  | `{n,}`  | 重复n次或更多次  |
  | `{n,m}` | 重复n到m次       |

  - 例如：

    ```js
    /a*/   			//代表a可以出现0次或更多次,a出现的次数n>=0
    /a+/   			//代表a至少出现1次或更多次,a出现的次数n>=1
    /a?/   			//代表a可以出现0次或1次,a出现的次数0||1
    /a{3}/ 			//代表a至少连续出现3次,可以多次,不能少于3。如baaad、caaaav
    /^a{3}$/ 		//代表只能是aaa,开头结尾都是a,且连续出现3次
    /^a{3}/			//代表a开头,且连续出现最少3次。如aaaa、aaab
    /a{3}$/			//代表a结尾,且连续出现最少3次。如aaaa、baaa
    /a{3,}/			//代表a至少连续出现3次或更多次。如scdaaaw、sdcaaaasd
    /a{3,6}/		//代表a至少连续出现3次或更多次
    /^a{3,6}$/	//代表a至少连续出现3～6次
    ```

    - 注意： 逗号左右两侧千万不要出现空格

- `[]` 匹配字符集合

  - 例如：`[abc].test('abc')`
    - 后面的字符串只要包含 abc 中任意一个字符,都返回 true。
    - `[]` 理解为只能存储1个字符,`[abc]`可以理解为abc中的任意一个字符,三选一,可以是a,可以是b,可以是c

- `[]` 里面加上 - 连字符

  - 使用连字符 - 表示一个范围

    ```javascript
    console.log(/^[a-z]$/.test('c')  //true
    ```

  - 比如：

    - `[a-z]` 表示 a 到 z 26个英文字母都可以
    - `[a-zA-Z]` 表示大小写都可以
    - `[0-9]` 表示 0~9 的数字都可以

  - 认识下：

    ```javascript
    //腾讯QQ号：	 
    ^[1-9][0-9]{4,}$      //腾讯QQ号从10000开始
    
    //中文验证：	  
    ^[\u4e00-\u9fa5]{2,8}$/
    
    //日期格式：
    ^\d{4}-\d{1,2}-\d{1,2}
    ```

- `[]` 里面加上 ^ 取反符号

  - 比如：
    - `[^a-z]` 匹配除了小写字母以外的字符
    - 注意要写到中括号里面

- `.` 匹配除换行符之外的任何单个字符

- 预定义：指的是某些常见模式的简写方式。

  | 预定类 | 说明                                                         |
  | ------ | ------------------------------------------------------------ |
  | `\d`   | 匹配0-9之间的任一数字,相当于`[0-9]`                         |
  | `\D`   | 匹配所有0-9以外的字符,相当于`[^0-9]`                        |
  | `\w`   | 匹配任意的字母、数字和下划线,相当于`[A-Za-z0-9_]`           |
  | `\W`   | 除所有字母、数字和下划线以外的字符,相当于`[^A-Za-z0-9_]`    |
  | `\s`   | 匹配空格（包括换行符、制表符、空格符等）,相当于`[\t\r\n\v\f]` |
  | `\S`   | 匹配非空格的字符,相当于`[^\t\r\n\v\f]`                      |



## 4 修饰符

- 修饰符约束正则执行的某些细节行为,如是否区分大小写、是否支持多行匹配等

- 语法：

  ```javascript
  /表达式/修饰符
  ```

  - i 是单词 ignore 的缩写,正则匹配时字母不区分大小写

    - 例如：

      ```javascript
      console.log(/a/i.test('a'))	//true
      console.log(/a/i.test('A'))	//true
      ```

  - g 是单词 global 的缩写,匹配所有满足正则表达式的结果

- 替换 replace 替换

- 语法：

  ```javascript
  字符串.replace(/正则表达式/, '替换的文本')
  ```

  - 例如：

    ```javascript
    let str='小苏同学爱吃苹果'
    console.log(str.replace(/苹果/,'香蕉'))		//小苏同学爱吃香蕉
    ```



- 扩展

  ```javascript
  for(){
  	break  //退出循环  结束循环
  	continue  //结束本次循环,继续下一次循环
  }
  ```

  ```javascript
  function fn(){
  	return  //有值便返回值,没有值便结束函数
  }
  ```

