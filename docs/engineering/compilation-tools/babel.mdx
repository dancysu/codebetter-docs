# Babel

![Babel](https://babeljs.io/img/babel.svg)

[Babel](https://babeljs.io/) æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ JavaScript ç¼–è¯‘å™¨,ä¸»è¦ç”¨äºå°†é‡‡ç”¨ ES2015+ è¯­æ³•ç¼–å†™çš„ä»£ç è½¬åŒ–ä¸ºå‘åå…¼å®¹çš„ä½ç‰ˆæœ¬ JavaScript ä»£ç ï¼ˆå¦‚ ES5ï¼‰,ä»¥ç¡®ä¿ä»£ç èƒ½å¤Ÿåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶å®ƒç¯å¢ƒä¸­è¿è¡Œã€‚

Babelçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒçš„æ’ä»¶ï¼ˆpluginsï¼‰å’Œé¢„è®¾ï¼ˆPresetsï¼‰æœºåˆ¶,é€šè¿‡ä¸åŒçš„æ’ä»¶,å¼€å‘è€…å¯ä»¥æœ‰é’ˆå¯¹æ€§åœ°å¤„ç†æŸäº›è¯­æ³•ç‰¹æ€§ã€‚



## æ’ä»¶å’Œé¢„è®¾

Babel æœ¬èº«åªæ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨,å®ƒä¸ä¼šè‡ªåŠ¨è½¬è¯‘ä»£ç ,è½¬è¯‘å·¥ä½œä¸»è¦æ˜¯é€šè¿‡æ’ä»¶å’Œé¢„è®¾å®Œæˆçš„ã€‚æ¯ä¸ª Babel æ’ä»¶è´Ÿè´£å¤„ç†ç‰¹å®šçš„è¯­æ³•æˆ–è¯­è¨€ç‰¹æ€§,æ¯”å¦‚ç®­å¤´å‡½æ•°ã€æ¨¡ç‰ˆå­—ç¬¦ä¸²ã€è§£æ„èµ‹å€¼ç­‰ã€‚

### æ’ä»¶ï¼ˆPluginsï¼‰

æ’ä»¶æ˜¯ Babel çš„æ ¸å¿ƒåŠŸèƒ½å•ä½,æ¯ä¸ªæ’ä»¶è´Ÿè´£è½¬æ¢ç‰¹å®šçš„è¯­æ³•ç‰¹æ€§ã€‚ä¾‹å¦‚,æœ‰çš„æ’ä»¶è´Ÿè´£è½¬æ¢ç®­å¤´å‡½æ•°,æœ‰çš„è´Ÿè´£è½¬æ¢æ¨¡æ¿å­—ç¬¦ä¸²ã€‚é€šè¿‡ç»„åˆä¸åŒçš„æ’ä»¶,Babel å¯ä»¥å®ç°å¯¹å„ç§ JavaScript è¯­æ³•çš„æ”¯æŒã€‚
ç¤ºä¾‹ï¼š

```js
// babel.config.js
module.exports = {
  plugins: [
    "@babel/plugin-transform-arrow-functions",
    "@babel/plugin-transform-template-literals"
  ]
}
```

åœ¨è¿™ä¸ªé…ç½®ä¸­,`@babel/plugin-transform-arrow-functions` æ’ä»¶å°†ç®­å¤´å‡½æ•°è½¬æ¢ä¸ºæ™®é€šçš„å‡½æ•°è¡¨è¾¾å¼,è€Œ `@babel/plugin-transform-template-literals` æ’ä»¶åˆ™å°†æ¨¡æ¿å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ™®é€šçš„å­—ç¬¦ä¸²è¿æ¥ã€‚

### é¢„è®¾ï¼ˆPresetsï¼‰

é¢„è®¾æ˜¯ä¸€ç»„ Babel æ’ä»¶çš„é›†åˆ,é€šå¸¸ç”¨äºç¼–è¯‘ç‰¹å®šç‰ˆæœ¬çš„ JavaScriptã€‚ä¾‹å¦‚,`@babel/preset-env` æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„é¢„è®¾,å®ƒæ ¹æ®ç›®æ ‡ç¯å¢ƒè‡ªåŠ¨é€‰æ‹©æ‰€éœ€çš„æ’ä»¶æ¥ç¼–è¯‘ä»£ç ã€‚
ç¤ºä¾‹ï¼š

```js
// babel.config.js
module.exports = {
  presets: ["@babel/preset-env"],
}
```

åœ¨è¿™ä¸ªé…ç½®ä¸­,`@babel/preset-env` é¢„è®¾ä¼šæ ¹æ®æµè§ˆå™¨æˆ–è¿è¡Œç¯å¢ƒçš„æ”¯æŒæƒ…å†µ,è‡ªåŠ¨æ·»åŠ å¿…è¦çš„æ’ä»¶æ¥ç¼–è¯‘ä»£ç ã€‚

### æ’ä»¶å’Œé¢„è®¾çš„åŒºåˆ«

- æ’ä»¶ï¼šæ˜¯ç”¨äºè½¬æ¢ç‰¹å®šè¯­æ³•ç‰¹æ€§çš„å•ç‹¬åŠŸèƒ½å•å…ƒ,å¯ä»¥æ ¹æ®éœ€è¦å•ç‹¬é…ç½®å’Œä½¿ç”¨ã€‚
- é¢„è®¾ï¼šæ˜¯æ’ä»¶çš„é›†åˆ,ç”¨äºç®€åŒ–é…ç½®,é€šå¸¸é’ˆå¯¹ç‰¹å®šçš„ JavaScript ç‰ˆæœ¬æˆ–åŠŸèƒ½é›†ã€‚

## è½¬æ¢è¿‡ç¨‹

:::tip Babel çš„å·¥ä½œæµç¨‹
é¦–å…ˆå°†æºä»£ç è§£ææˆ AST,ç„¶åä½¿ç”¨å„ç§æ’ä»¶å¯¹ç”Ÿæˆçš„ AST è¿›è¡Œä¿®æ”¹å·²å®ç°ç‰¹å®šçš„åŠŸèƒ½,æ¯”å¦‚è¯­æ³•é™çº§,æœ€å,Babel å°†ä¿®æ”¹åçš„ AST è½¬æ¢å› JavaScript ä»£ç ã€‚
:::
Babel çš„ä»£ç è½¬æ¢è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š

1. **è§£æï¼ˆParsingï¼‰**
   - Babelé¦–å…ˆå°†ä»£ç è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰,è¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼äºæµè§ˆå™¨çš„JavaScriptå¼•æ“è§£æä»£ç çš„æ–¹å¼
   - AST æ˜¯ä»£ç çš„ç»“æ„åŒ–è¡¨ç¤º,ä¾¿äºåç»­çš„åˆ†æå’Œè½¬æ¢ã€‚
2. **è½¬æ¢ï¼ˆTransformationï¼‰**
   - æ ¹æ®æ’ä»¶å’Œé¢„è®¾çš„é…ç½®,Babelä¼šå¯¹ASTè¿›è¡Œéå†å¹¶ä¿®æ”¹,å°†ä¸å…¼å®¹çš„è¯­æ³•è½¬æ¢ä¸ºå…¼å®¹çš„è¯­æ³•ã€‚ä¾‹å¦‚,å°†ç®­å¤´å‡½æ•°è½¬æ¢ä¸ºæ™®é€šå‡½æ•°è¡¨è¾¾å¼ã€‚
3. **ç”Ÿæˆï¼ˆGenerationï¼‰**

  - æœ€å,Babelå°†ä¿®æ”¹åçš„ASTé‡æ–°ç”Ÿæˆä¸º JavaScript ä»£ç ã€‚ç”Ÿæˆçš„ä»£ç æ˜¯ç»è¿‡è½¬æ¢åå¯ä»¥åœ¨ç›®æ ‡ç¯å¢ƒä¸­è¿è¡Œçš„ä»£ç ã€‚
    ä»¥ç®­å¤´å‡½æ•°çš„è½¬æ¢ä¸ºä¾‹,Babelé¦–å…ˆè¯†åˆ«å‡ºç®­å¤´å‡½æ•°çš„è¯­æ³•ç‰¹ç‚¹,ç„¶åé€šè¿‡æ’ä»¶å°†å…¶è½¬æ¢ä¸ºç­‰ä»·çš„æ™®é€šå‡½æ•°è¡¨è¾¾å¼,æœ€åè¾“å‡ºè½¬æ¢åçš„ä»£ç ã€‚

## babel å’Œ polyfill

éœ€è¦æ³¨æ„çš„æ˜¯,babelåªèƒ½è½¬è¯‘è¯­æ³•,å®ƒä¸ä¼šä¸ºæ–°çš„ API æä¾› Polyfill,ä¾‹å¦‚ï¼šES6çš„ promiseã€Mapç­‰APIæ— æ³•é€šè¿‡Babelè½¬æ¢,å¦‚æœéœ€è¦æ”¯æŒè¿™äº›API,éœ€è¦ç»“åˆ `core-js` æˆ– `regenerator-runtime` ç­‰åº“æ¥å®ç° Poyfillã€‚
**ä½¿ç”¨ Polyfill çš„æ–¹æ³•**

- **æ‰‹åŠ¨å¼•å…¥**ï¼šå¯ä»¥æ‰‹åŠ¨åœ¨é¡¹ç›®ä¸­å¼•å…¥ `core-js` æˆ– `regenerator-runtime` æ¥æ”¯æŒæ‰€éœ€çš„ APIã€‚
- **è‡ªåŠ¨å¼•å…¥**ï¼šé€šè¿‡é…ç½® Babel çš„ `@babel/preset-env`,å¯ä»¥æ ¹æ®ä»£ç ä¸­ä½¿ç”¨çš„ç‰¹æ€§è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ Polyfillã€‚
  é€šè¿‡ç»“åˆä½¿ç”¨ Babel çš„è¯­æ³•è½¬æ¢å’Œ Polyfill,å¯ä»¥ç¡®ä¿ç°ä»£ JavaScript ä»£ç åœ¨æ—§æµè§ˆå™¨å’Œç¯å¢ƒä¸­çš„å…¼å®¹æ€§ã€‚


## è¯­æ³•é™çº§
:::tip ğŸ¯

Babel å¯ä»¥å°† ES2015+ è¯­æ³•çš„ JavaScript ä»£ç ç¼–è¯‘ä¸ºèƒ½åœ¨å½“å‰æµè§ˆå™¨ä¸Šå·¥ä½œçš„ä»£ç 

:::

----

**æ­¥éª¤ 1ï¼šé¡¹ç›®åˆå§‹åŒ–**
é¦–å…ˆ,ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼š
```bash
pnpm init
```
---
**æ­¥éª¤ 2ï¼šå®‰è£… Babel ä¾èµ–**
åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤,å®‰è£… Babel åŠå…¶æ‰€éœ€çš„åŒ…ï¼š
- `@babel/core`: Babel çš„æ ¸å¿ƒåº“ã€‚
- `@babel/cli`: Babel çš„å‘½ä»¤è¡Œå·¥å…·ã€‚
- `@babel/preset-env`: ä¸€ä¸ªæ™ºèƒ½é¢„è®¾,ç”¨äºç¼–è¯‘ç°ä»£ JavaScript è¯­æ³•ã€‚
```bash
pnpm add -D @babel/core @babel/cli @babel/preset-env
```
---
**æ­¥éª¤ 3ï¼šé…ç½® Babel**
åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `babel.config.js` çš„é…ç½®æ–‡ä»¶,å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
```js
// é…ç½®,åŸºäº commonjs è§„èŒƒ
// è¿™ä¸ªé…ç½®æ–‡ä»¶å‘Šè¯‰ Babel ä½¿ç”¨ @babel/preset-env é¢„è®¾æ¥å¤„ç†ä»£ç ã€‚
module.exports = {
 presets: ["@babel/preset-env"],
}
```
---
**æ­¥éª¤ 4ï¼šç¼–å†™æµ‹è¯•æ–‡ä»¶**
åœ¨ `src` ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª `test.js` æ–‡ä»¶,å†…å®¹å¦‚ä¸‹ï¼š
```js
// è¿™ä¸ªæ–‡ä»¶åŒ…å«ä¸€ä¸ªç®€å•çš„ç®­å¤´å‡½æ•°ç”¨äºæµ‹è¯•ã€‚
const fn = () => {
  console.log('test')
}
```
---
**æ­¥éª¤ 5ï¼šæ·»åŠ æ„å»ºå‘½ä»¤**
åœ¨ `package.json` æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ„å»ºå‘½ä»¤,ä»¥ä¾¿ä½¿ç”¨ Babel ç¼–è¯‘ä»£ç ï¼š
- `src`: æºä»£ç ç›®å½•ã€‚
- `--out-dir lib`: æŒ‡å®šç¼–è¯‘åçš„ä»£ç è¾“å‡ºåˆ° `lib` ç›®å½•ã€‚
```json
{
  "scripts": {
    "build": "babel src --out-dir lib"
  }
}
```
----
**æ­¥éª¤ 6: è¿è¡Œæ„å»º**
æœ€å,è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ„å»ºï¼š
```bash
pnpm run build
```
è¿™å°†ä½¿ç”¨ Babel ç¼–è¯‘ `src` ç›®å½•ä¸‹çš„ä»£ç ,å¹¶å°†ç»“æœè¾“å‡ºåˆ° `lib` ç›®å½•ã€‚

## tsè½¬æ¢
:::tip ğŸ¯

Babel å¯ä»¥åˆ é™¤ç±»å‹æ³¨é‡Šï¼ä½¿ç”¨ Babel å°† TypeScript ä»£ç è½¬æ¢ä¸º JavaScript,åŠ¡å¿…ç‰¢è®° **Babel ä¸åšç±»å‹æ£€æŸ¥**ã€‚

:::

----

**æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–**
é¦–å…ˆ,å®‰è£…ç”¨äºå¤„ç† TypeScript çš„ Babel é¢„è®¾ `@babel/preset-typescript`ï¼š

- `@babel/preset-typescript`: ç”¨äºç¼–è¯‘ TypeScript ä»£ç ã€‚
```bash
pnpm add -D @babel/preset-typescript
```
---
**æ­¥éª¤ 2ï¼šé…ç½® Babel**
åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹,åˆ›å»ºæˆ–ä¿®æ”¹ `babel.config.js` æ–‡ä»¶,ä»¥æ”¯æŒ TypeScriptã€‚é…ç½®å¦‚ä¸‹ï¼š
```js
// ä½¿ç”¨ CommonJS è§„èŒƒå¯¼å‡ºé…ç½®
module.exports = {
  presets: ['@babel/preset-env', '@babel/preset-typescript']
}
```
----
**æ­¥éª¤ 3ï¼šåˆ›å»º TypeScript æ–‡ä»¶**
åœ¨ `src` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `example.ts` çš„æ–‡ä»¶,å†…å®¹å¦‚ä¸‹ï¼š
```ts
const greet = (name: string): string => {
  return `Hello, ${name}!`;
}
console.log(greet('World'));
```
---
**æ­¥éª¤ 4ï¼šæ·»åŠ æ„å»ºå‘½ä»¤**
åœ¨ `package.json` æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ„å»ºå‘½ä»¤,ä»¥ä¾¿ä½¿ç”¨ Babel ç¼–è¯‘ TypeScript ä»£ç ï¼š
- `--extensions '.ts,.tsx'`: æŒ‡å®š Babel å¤„ç† `.ts` å’Œ `.tsx` æ–‡ä»¶ã€‚
- `--out-dir lib`: æŒ‡å®šç¼–è¯‘åçš„ä»£ç è¾“å‡ºåˆ° `lib` ç›®å½•ã€‚
```json
{
  "scripts": {
    "build": "babel src --extensions '.ts,.tsx' --out-dir lib"
  }
}
```
----
**æ­¥éª¤ 5ï¼šè¿è¡Œæ„å»º**
æœ€å,è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ„å»ºï¼š
```bash
pnpm run build
```
è¿™å°†ä½¿ç”¨ Babel ç¼–è¯‘ `src` ç›®å½•ä¸‹çš„ TypeScript æ–‡ä»¶,å¹¶å°†ç»“æœè¾“å‡ºåˆ° `lib` ç›®å½•ã€‚é€šè¿‡è¿™ç§æ–¹å¼,æ‚¨å¯ä»¥å°† TypeScript ä»£ç è½¬æ¢ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„ JavaScript ä»£ç ã€‚

## jsx ä¸ react

:::tip ğŸ¯

ä½¿ç”¨ Babel æ¥å¤„ç† JSX è¯­æ³•å’Œ React ä»£ç ã€‚

:::

-----

**æ­¥éª¤ 1ï¼šå®‰è£… Babel React é¢„è®¾**
ä¸ºäº†è®© Babel è¯†åˆ«å’Œè½¬æ¢ JSX è¯­æ³•,æˆ‘ä»¬éœ€è¦å®‰è£… `@babel/preset-react`ï¼š
- `@babel/preset-react`: ç”¨äºç¼–è¯‘ JSX è¯­æ³•å’Œ React ä»£ç ã€‚
```bash
pnpm add -D @babel/preset-react
```
---
**æ­¥éª¤ 2ï¼šé…ç½®babel**
åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹,ä¿®æ”¹ `babel.config.js` æ–‡ä»¶ä»¥åŒ…å« React é¢„è®¾ã€‚é…ç½®å¦‚ä¸‹ï¼š
```js
// é…ç½®,åŸºäº commonjs è§„èŒƒ
module.exports = {
  presets: ['@babel/preset-env','@babel/preset-react']
}
```
---
**æ­¥éª¤ 3ï¼šåˆ›å»º React ç»„ä»¶**
åœ¨ `src` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `App.jsx` çš„æ–‡ä»¶,å†…å®¹å¦‚ä¸‹ï¼š
```jsx
import react from 'react'
import { createRoot } from 'react-dom/client'
const App = () => {
    return <div>Code Better</div>
}
createRoot(document.getElementById('root')).render(<App />)
```
---
**æ­¥éª¤ 4ï¼šè¿è¡Œæ„å»º**
æœ€å,è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ„å»ºï¼š
```bash
pnpm run build
```
è¿™å°†ä½¿ç”¨ Babel ç¼–è¯‘åŒ…å« JSX è¯­æ³•çš„ `App.jsx` æ–‡ä»¶,å¹¶è¾“å‡ºåˆ°æŒ‡å®šç›®å½•ã€‚é€šè¿‡è¿™ç§æ–¹å¼,æ‚¨å¯ä»¥å°† React ç»„ä»¶è½¬æ¢ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„ JavaScript ä»£ç ã€‚

## Polyfill
è™½ç„¶ Babel æœ¬èº«ä¸ç›´æ¥æä¾› Polyfill,ä½†é€šè¿‡é…ç½® @babel/preset-env å’Œä½¿ç”¨ core-js,å¯ä»¥æŒ‰éœ€å¼•å…¥ Polyfill,ä»¥æ”¯æŒä¸è¢«æ—§ç¯å¢ƒåŸç”Ÿæ”¯æŒçš„ JavaScript æ–°ç‰¹æ€§ã€‚
Polyfill å¯ä»¥è®©ä¸æ”¯æŒæŸäº›ç°ä»£ JavaScript ç‰¹æ€§çš„æ—§æµè§ˆå™¨æˆ–ç¯å¢ƒèƒ½å¤Ÿè¿è¡Œä½¿ç”¨è¿™äº›ç‰¹æ€§çš„ä»£ç ã€‚ä¾‹å¦‚,`Promise`ã€`Array.includes` ç­‰ç‰¹æ€§åœ¨è¾ƒæ—§çš„æµè§ˆå™¨ä¸­å¯èƒ½ä¸è¢«æ”¯æŒ,é€šè¿‡ Polyfill å¯ä»¥å®ç°è¿™äº›åŠŸèƒ½ã€‚
:::tip `@babel/preset-env` å’Œ Polyfill æ˜¯ç”¨äºä¸åŒç›®çš„çš„å·¥å…·,å®ƒä»¬åœ¨ç°ä»£ JavaScript å¼€å‘ä¸­å¯ä»¥äº’è¡¥ä½¿ç”¨ã€‚
@babel/preset-env çš„ä½œç”¨
- **è¯­æ³•è½¬æ¢**ï¼š`@babel/preset-env` ä¸»è¦è´Ÿè´£å°†ç°ä»£ JavaScript è¯­æ³•ï¼ˆä¾‹å¦‚ç®­å¤´å‡½æ•°ã€ç±»ã€è§£æ„èµ‹å€¼ç­‰ï¼‰è½¬æ¢ä¸ºæ—§ç‰ˆæœ¬ JavaScript è¯­æ³•,ä½¿å…¶èƒ½å¤Ÿåœ¨ä¸æ”¯æŒè¿™äº›è¯­æ³•çš„æµè§ˆå™¨ä¸­è¿è¡Œã€‚
- **ä¸è½¬æ¢å†…ç½®å¯¹è±¡**ï¼šè™½ç„¶ `@babel/preset-env` å¯ä»¥å¤„ç†è¯­æ³•è½¬æ¢,ä½†å®ƒä¸å¤„ç† JavaScript å†…ç½®å¯¹è±¡å’Œæ–¹æ³•çš„æ”¯æŒé—®é¢˜ã€‚ä¾‹å¦‚,å®ƒä¸ä¼šè‡ªåŠ¨ä¸º `Promise`ã€`Array.includes`ã€`String.padStart` ç­‰æä¾›å®ç°ã€‚
----
Polyfill çš„ä½œç”¨
- **æä¾›åŠŸèƒ½å®ç°**ï¼šPolyfill ç”¨äºåœ¨ä¸æ”¯æŒæŸäº›å†…ç½®å¯¹è±¡ã€æ–¹æ³•æˆ– API çš„ç¯å¢ƒä¸­æä¾›è¿™äº›åŠŸèƒ½çš„å®ç°ã€‚ä¾‹å¦‚,Polyfill å¯ä»¥ä¸º `Promise`ã€`fetch`ã€`Map` ç­‰æä¾›æ”¯æŒã€‚
- **è¡¥å……è¯­æ³•è½¬æ¢**ï¼šå³ä½¿è¯­æ³•è¢«è½¬æ¢ä¸ºæ—§ç‰ˆæœ¬çš„ JavaScript,ä»£ç ä¸­ä½¿ç”¨çš„æŸäº›æ–°ç‰¹æ€§ï¼ˆå¦‚ `Promise`ï¼‰ä»ç„¶éœ€è¦åœ¨è¿è¡Œæ—¶ç¯å¢ƒä¸­å¾—åˆ°æ”¯æŒ,è¿™å°±æ˜¯ Polyfill çš„ä½œç”¨ã€‚
:::
----
**æ­¥éª¤ 1ï¼šå®‰è£…**
é¦–å…ˆ,å®‰è£… Babel åŠå…¶ç›¸å…³çš„ Polyfill åŒ…ï¼š
- `core-js`: ä¸€ä¸ªæ¨¡å—åŒ–çš„æ ‡å‡†åº“,æä¾›å¯¹ ECMAScript æ–°ç‰¹æ€§å’Œå…¶ä»–æ ‡å‡†åº“çš„ Polyfill æ”¯æŒã€‚
- `regenerator-runtime`ï¼šç”¨äºæ”¯æŒ `async/await` å’Œç”Ÿæˆå™¨å‡½æ•°çš„ Polyfillã€‚
```bash
pnpm add core-js
```
---
**æ­¥éª¤ 2ï¼šé…ç½® Babel**
åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹,åˆ›å»ºæˆ–ä¿®æ”¹ `babel.config.js` æ–‡ä»¶,ä»¥æ”¯æŒ Polyfillã€‚é…ç½®å¦‚ä¸‹ï¼š
- `useBuiltIns: 'usage'`: æ ¹æ®ä»£ç ä¸­ä½¿ç”¨çš„ç‰¹æ€§æŒ‰éœ€å¼•å…¥ Polyfillã€‚
- `corejs: 3`: æŒ‡å®šä½¿ç”¨ `core-js` çš„ç‰ˆæœ¬ 3ã€‚
```js
// ä½¿ç”¨ CommonJS è§„èŒƒå¯¼å‡ºé…ç½®
module.exports = {
  presets: [
    ['@babel/preset-env', {
      useBuiltIns: 'usage', // æŒ‰éœ€å¼•å…¥ Polyfill
      corejs: 3 // ä½¿ç”¨ core-js ç‰ˆæœ¬ 3
    }]
  ]
}
```
---
**æ­¥éª¤ 3ï¼šåˆ›å»ºç¤ºä¾‹æ–‡ä»¶**
åœ¨ `src` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `example.js` çš„æ–‡ä»¶,å†…å®¹å¦‚ä¸‹ï¼š
```js
// Promise: ç°ä»£ JavaScript ä¸­çš„å¼‚æ­¥å¤„ç†ã€‚
const promiseExample = new Promise((resolve) => {
  setTimeout(() => resolve('Hello, World!'), 1000);
});
promiseExample.then(console.log);
// Array.includes: ç”¨äºæ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ã€‚
const arrayExample = [1, 2, 3].includes(2);
console.log(arrayExample);
```
---
**æ­¥éª¤ 4ï¼šæ·»åŠ æ„å»ºå‘½ä»¤**
åœ¨ `package.json` æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ„å»ºå‘½ä»¤,ä»¥ä¾¿ä½¿ç”¨ Babel ç¼–è¯‘ä»£ç ï¼š
```json
{
  "scripts": {
    "build": "babel src --out-dir lib"
  }
}
```
---
**æ­¥éª¤ 5ï¼šè¿è¡Œæ„å»º**
æœ€å,è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ„å»ºï¼š
```bash
pnpm run build
```
è¿™å°†ä½¿ç”¨ Babel ç¼–è¯‘ `src` ç›®å½•ä¸‹çš„ä»£ç ,å¹¶æ ¹æ®éœ€è¦è‡ªåŠ¨å¼•å…¥ Polyfill,ä»¥ä¾¿åœ¨æ—§æµè§ˆå™¨ä¸­è¿è¡Œã€‚é€šè¿‡è¿™ç§æ–¹å¼,æ‚¨å¯ä»¥ç¡®ä¿ç°ä»£ JavaScript ç‰¹æ€§åœ¨ä¸æ”¯æŒè¿™äº›ç‰¹æ€§çš„æµè§ˆå™¨ä¸­ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚